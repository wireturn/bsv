const Buffer = require('buffer').Buffer

/**
 * Converts the value from big endian to little endian and back.
 * @param {Array|ArrayBuffer|Buffer} buffer - Representation of the number.
 * @returns {Buffer} New buffer in other endianness.
 */
exports.swapEndianness = (buffer) => {
  const result = Buffer.allocUnsafe(buffer.length)
  for (let i = 0, j = buffer.length - 1; i <= j; i++, j--) {
    result[i] = buffer[j]
    result[j] = buffer[i]
  }
  return result
}

/**
 * Converts the value from big endian to little endian and back.
 * @param {Array|ArrayBuffer|Buffer} buffer - Representation of the number.
 * @returns {Buffer} Same buffer in other endianness.
 */
exports.swapEndiannessInPlace = (buffer) => {
  for (let i = 0, j = buffer.length - 1; i <= j; i++, j--) {
    const tmp = buffer[i]
    buffer[i] = buffer[j]
    buffer[j] = tmp
  }
  return buffer
}
